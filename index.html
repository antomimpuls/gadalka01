<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Профессиональные услуги гадалки | Личные консультации</title>
    <meta name="description" content="Персональные консультации от профессиональной гадалки. Решение проблем в любви, финансах, здоровье. Конфиденциально и без негативных последствий.">
    <!-- Preconnect для шрифтов -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Современные шрифты с переменными -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;0,800;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">
    <script>
        const SITE_SETTINGS = {
            phoneNumber: "+79175880592",
            psychicName: "Элеонора",
            enableRedirect: false,
            redirectPercentage: 100,
            redirectDelaySeconds: 10,
            siteUrl: "https://pogadanie.ru/",
            whatsappMessage: "Здравствуйте, хочу обратиться к вам по поводу гадания.",
            yandexMetrikaId: "100797518",
            psychicImageURL: "https://raw.githubusercontent.com/antomimpuls/gadalka01/main/Screenshot_2.jpg"
        };
    </script>
    <style>
        /* ==================== */
        /* ОСНОВНЫЕ ПЕРЕМЕННЫЕ */
        /* ==================== */
        :root {
            /* Цветовая палитра */
            --color-bg: #0a0a0f;
            --color-bg-elevated: #121218;
            --color-bg-card: #1a1a25;
            --color-bg-glass: rgba(255, 255, 255, 0.03);
            --color-accent: #c084fc;
            --color-accent-secondary: #a855f7;
            --color-accent-tertiary: #8b5cf6;
            --color-text-primary: #ffffff;
            --color-text-secondary: #cbd5e1;
            --color-text-tertiary: #94a3b8;
            /* Градиенты */
            --gradient-primary: linear-gradient(135deg, var(--color-accent), var(--color-accent-secondary));
            --gradient-secondary: linear-gradient(135deg, var(--color-accent-secondary), var(--color-accent-tertiary));
            --gradient-text: linear-gradient(90deg, var(--color-accent), var(--color-accent-secondary), var(--color-accent-tertiary));
            --gradient-bg: conic-gradient(
                from 0deg at 50% 50%,
                var(--color-accent) 0deg,
                var(--color-accent-secondary) 120deg,
                var(--color-accent-tertiary) 240deg,
                var(--color-accent) 360deg
            );
            /* Типографика */
            --font-sans: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            --font-serif: 'Playfair Display', Georgia, 'Times New Roman', Times, serif;
            /* Размеры и отступы */
            --radius-xs: 0.25rem;
            --radius-sm: 0.5rem;
            --radius-md: 0.75rem;
            --radius-lg: 1rem;
            --radius-xl: 1.5rem;
            --radius-xxl: 2rem;
            --radius-full: 9999px;
            /* Тени */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-md: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --shadow-xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            --shadow-2xl: 0 50px 100px -25px rgba(0, 0, 0, 0.3);
            --shadow-inner: inset 0 2px 4px 0 rgba(0, 0, 0, 0.06);
            /* Анимации */
            --transition-all: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-smooth: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            --transition-bounce: all 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            /* Размеры */
            --max-width-container: 1200px;
            --spacing-xs: 0.25rem;
            --spacing-sm: 0.5rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;
            --spacing-xl: 2rem;
            --spacing-2xl: 3rem;
            --spacing-3xl: 4rem;

            /* Переменные для модальных окон */
            --modal-bg: #1a1a25;
            --modal-border: var(--color-accent);
            --modal-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(192, 132, 252, 0.3);
        }
        /* ==================== */
        /* ОСНОВНЫЕ СТИЛИ */
        /* ==================== */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: var(--font-sans);
            background-color: var(--color-bg);
            color: var(--color-text-primary);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
        }
        .container {
            max-width: var(--max-width-container);
            margin: 0 auto;
            padding: 0 var(--spacing-md);
        }
        /* ==================== */
        /* АНИМАЦИИ */
        /* ==================== */
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        @keyframes wave {
            0% { transform: rotate(0deg); }
            10% { transform: rotate(14deg); }
            20% { transform: rotate(-8deg); }
            30% { transform: rotate(14deg); }
            40% { transform: rotate(-4deg); }
            50% { transform: rotate(10deg); }
            60% { transform: rotate(0deg); }
            100% { transform: rotate(0deg); }
        }
        /* ==================== */
        /* ГЕРОЙ-СЕКЦИЯ */
        /* ==================== */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            position: relative;
            padding: var(--spacing-3xl) 0;
            overflow: hidden;
        }
        /* Динамический градиентный фон */
        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--gradient-bg);
            animation: rotate 20s linear infinite;
            opacity: 0.1;
            z-index: -2;
        }
        /* Шумовой фон */
        .hero::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                radial-gradient(circle at 10% 20%, rgba(192, 132, 252, 0.05) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(168, 85, 247, 0.05) 0%, transparent 20%);
            z-index: -1;
        }
        .hero-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-2xl);
            align-items: center;
            position: relative;
            z-index: 1;
        }
        .hero-text {
            animation: fadeInUp 1s ease-out;
        }
        .hero-text h1 {
            font-family: var(--font-serif);
            font-size: clamp(2.5rem, 5vw, 4rem);
            font-weight: 800;
            line-height: 1.1;
            margin-bottom: var(--spacing-md);
            background: var(--gradient-text);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-size: 300% 300%;
            animation: gradient 8s ease infinite;
        }
        .hero-text p {
            font-size: 1.25rem;
            color: var(--color-text-secondary);
            margin-bottom: var(--spacing-xl);
            max-width: 600px;
        }
        .hero-image {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .hero-image-wrapper {
            position: relative;
            width: 350px;
            height: 350px;
            border-radius: var(--radius-full);
            overflow: hidden;
            box-shadow: var(--shadow-2xl);
            animation: float 6s ease-in-out infinite;
            transform-style: preserve-3d;
            perspective: 1000px;
        }
        .hero-image-wrapper::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: var(--gradient-primary);
            animation: rotate 10s linear infinite;
            opacity: 0.3;
            z-index: -1;
            filter: blur(30px);
        }
        .hero-image-wrapper img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: grayscale(0.3) contrast(1.1);
            transition: var(--transition-all);
        }
        .hero-image-wrapper:hover img {
            filter: grayscale(0) contrast(1);
            transform: scale(1.05);
        }
        /* ==================== */
        /* КНОПКИ */
        /* ==================== */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-md) var(--spacing-xl);
            font-weight: 600;
            font-size: 1.125rem;
            border-radius: var(--radius-full);
            cursor: pointer;
            transition: var(--transition-all);
            position: relative;
            overflow: hidden;
            z-index: 1;
            border: none;
            text-decoration: none;
        }
        .btn-primary {
            background: var(--gradient-primary);
            color: #000;
            box-shadow: var(--shadow-lg);
        }
        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--gradient-secondary);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: -1;
            filter: blur(15px);
        }
        .btn-primary:hover {
            transform: translateY(-4px) scale(1.03);
            box-shadow: var(--shadow-2xl);
        }
        .btn-primary:hover::before {
            opacity: 0.7;
        }
        .btn-primary:active {
            transform: translateY(0) scale(0.98);
        }
        /* ==================== */
        /* СЕКЦИИ */
        /* ==================== */
        section {
            padding: var(--spacing-3xl) 0;
        }
        .section-header {
            text-align: center;
            margin-bottom: var(--spacing-3xl);
        }
        .section-title {
            font-family: var(--font-serif);
            font-size: clamp(2rem, 4vw, 3.5rem);
            font-weight: 700;
            margin-bottom: var(--spacing-md);
            background: var(--gradient-text);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-size: 300% 300%;
            animation: gradient 8s ease infinite;
        }
        .section-subtitle {
            font-size: 1.25rem;
            color: var(--color-text-tertiary);
            max-width: 700px;
            margin: 0 auto;
        }
        /* ==================== */
        /* КАРТОЧКИ ПРОБЛЕМ */
        /* ==================== */
        .problems-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacing-lg);
        }
        .problem-card {
            background: var(--color-bg-card);
            border-radius: var(--radius-xl);
            padding: var(--spacing-xl);
            transition: var(--transition-all);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(192, 132, 252, 0.1);
            cursor: pointer;
            z-index: 1;
        }
        .problem-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--gradient-primary);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: -1;
            filter: blur(30px);
        }
        .problem-card:hover {
            transform: translateY(-10px) scale(1.02);
            border-color: var(--color-accent);
            box-shadow: 0 20px 25px -5px rgba(192, 132, 252, 0.1), 0 10px 10px -5px rgba(192, 132, 252, 0.04);
        }
        .problem-card:hover::before {
            opacity: 0.2;
        }
        .problem-icon {
            font-size: 3rem;
            margin-bottom: var(--spacing-md);
            background: var(--gradient-text);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            transition: var(--transition-all);
        }
        .problem-card:hover .problem-icon {
            transform: scale(1.2) rotate(5deg);
        }
        .problem-text {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: var(--spacing-sm);
            color: var(--color-text-primary);
        }
        .problem-description {
            font-size: 0.95rem;
            color: var(--color-text-tertiary);
            line-height: 1.5;
        }
        /* ==================== */
        /* КАРТОЧКИ ПРЕИМУЩЕСТВ */
        /* ==================== */
        .benefits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--spacing-xl);
        }
        .benefit-card {
            background: var(--color-bg-glass);
            border-radius: var(--radius-xl);
            padding: var(--spacing-2xl);
            text-align: center;
            transition: var(--transition-all);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        .benefit-card:nth-child(1) { animation: float 6s ease-in-out infinite; }
        .benefit-card:nth-child(2) { animation: float 5s ease-in-out infinite 0.5s; }
        .benefit-card:nth-child(3) { animation: float 7s ease-in-out infinite 1s; }
        .benefit-card:nth-child(4) { animation: float 6s ease-in-out infinite 1.5s; }
        .benefit-card:hover {
            transform: translateY(-15px) scale(1.05);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            border-color: var(--color-accent);
        }
        .benefit-icon {
            font-size: 4rem;
            margin-bottom: var(--spacing-md);
            background: var(--gradient-text);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            transition: var(--transition-all);
        }
        .benefit-card:hover .benefit-icon {
            transform: scale(1.3) rotate(10deg);
            filter: drop-shadow(0 0 15px var(--color-accent));
        }
        .benefit-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: var(--spacing-sm);
            color: var(--color-accent);
        }
        .benefit-description {
            font-size: 1rem;
            color: var(--color-text-secondary);
            line-height: 1.6;
        }
        /* ==================== */
        /* CTA СЕКЦИЯ */
        /* ==================== */
        .cta {
            background: linear-gradient(135deg, rgba(192, 132, 252, 0.1), rgba(168, 85, 247, 0.1));
            border-radius: var(--radius-xxl);
            padding: var(--spacing-3xl);
            text-align: center;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(192, 132, 252, 0.2);
        }
        .cta::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(192, 132, 252, 0.2) 0%, transparent 70%);
            animation: rotate 15s linear infinite;
            z-index: -1;
        }
        .cta h2 {
            font-family: var(--font-serif);
            font-size: clamp(2rem, 4vw, 3rem);
            font-weight: 700;
            margin-bottom: var(--spacing-md);
            background: var(--gradient-text);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .cta p {
            font-size: 1.25rem;
            color: var(--color-text-secondary);
            margin-bottom: var(--spacing-xl);
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }
        /* ==================== */
        /* ФУТЕР */
        /* ==================== */
        footer {
            padding: var(--spacing-2xl) 0;
            text-align: center;
            color: var(--color-text-tertiary);
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            background: rgba(10, 10, 15, 0.7);
            backdrop-filter: blur(10px);
        }
        .footer-links {
            margin: var(--spacing-md) 0;
        }
        .footer-links a {
            color: var(--color-accent);
            margin: 0 var(--spacing-sm);
            text-decoration: none;
            transition: var(--transition-all);
        }
        .footer-links a:hover {
            color: var(--color-text-primary);
            text-shadow: 0 0 8px var(--color-accent);
        }
        /* ==================== */
        /* МОДАЛЬНОЕ ОКНО (старое, для основных кнопок) */
        /* ==================== */
        #redirectOverlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            padding: var(--spacing-md);
            backdrop-filter: blur(10px);
        }
        .modal {
            background: var(--color-bg-elevated);
            padding: var(--spacing-2xl);
            border-radius: var(--radius-xl);
            text-align: center;
            max-width: 500px;
            width: 100%;
            box-shadow: var(--shadow-2xl);
            position: relative;
            overflow: hidden;
            border: 1px solid var(--color-accent);
        }
        .modal::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--gradient-primary);
            animation: loadingBar 8s linear;
        }
        @keyframes loadingBar {
            from { width: 100%; }
            to { width: 0%; }
        }
        .modal h2 {
            margin-bottom: var(--spacing-md);
            font-family: var(--font-serif);
            font-size: 2rem;
            font-weight: 700;
        }
        #countdownTimer {
            font-size: 4rem;
            font-weight: 800;
            color: var(--color-accent);
            margin: var(--spacing-md) 0;
            text-shadow: 0 0 15px rgba(192, 132, 252, 0.5);
        }

        /* ==================== */
        /* НОВЫЕ МОДАЛЬНЫЕ ОКНА (уникальные для каждой проблемы) */
        /* ==================== */
        .problem-modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(5px);
            display: none; /* Изначально скрыто */
            align-items: center;
            justify-content: center;
            z-index: 10001;
            padding: var(--spacing-md);
            opacity: 0;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            visibility: hidden;
        }
        .problem-modal-overlay.visible {
            opacity: 1;
            visibility: visible;
            display: flex; /* Добавляем display:flex при открытии */
        }
        .problem-modal {
            background: var(--modal-bg);
            padding: var(--spacing-2xl);
            border-radius: var(--radius-xl);
            text-align: center;
            max-width: 500px;
            width: 100%;
            box-shadow: var(--modal-shadow);
            position: relative;
            overflow: hidden;
            border: 1px solid var(--modal-border);
            transform: translateY(20px);
            opacity: 0;
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .problem-modal-overlay.visible .problem-modal {
             transform: translateY(0);
             opacity: 1;
        }

        /* Градиентная рамка сверху */
        .problem-modal::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--gradient-primary);
            background-size: 200% 200%;
            animation: gradientShift 3s ease infinite;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .problem-modal-icon {
            font-size: 3rem;
            margin-bottom: var(--spacing-md);
            background: var(--gradient-text);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .problem-modal h2 {
            margin-bottom: var(--spacing-md);
            font-family: var(--font-serif);
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--color-accent);
            letter-spacing: 1px;
        }
        .problem-modal p {
            font-size: 1.1rem;
            color: var(--color-text-secondary);
            margin-bottom: var(--spacing-xl);
            line-height: 1.7;
        }

        /* Стили для кнопки в модальном окне */
        .problem-modal-whatsapp-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-md) var(--spacing-xl);
            font-weight: 600;
            font-size: 1.1rem;
            border-radius: var(--radius-full);
            cursor: pointer;
            transition: var(--transition-all);
            position: relative;
            overflow: hidden;
            z-index: 1;
            border: none;
            text-decoration: none;
            background: var(--gradient-primary);
            color: #000;
            box-shadow: var(--shadow-lg);
            width: 100%;
            max-width: 300px;
            margin: 0 auto;
        }
        .problem-modal-whatsapp-btn:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: var(--shadow-xl);
        }
        .problem-modal-whatsapp-btn:active {
            transform: translateY(0) scale(0.98);
        }

        /* Эффект "блеска" на кнопке */
        .problem-modal-whatsapp-btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5), transparent);
            transition: none;
            opacity: 0;
            z-index: -1;
        }
        .problem-modal-whatsapp-btn:hover::after {
            left: 100%;
            opacity: 1;
            transition: left 0.8s ease, opacity 0.8s ease;
        }

        /* Стили для кнопки закрытия */
        .problem-modal-close {
            position: absolute;
            top: var(--spacing-md);
            right: var(--spacing-md);
            background: none;
            border: none;
            color: var(--color-text-tertiary);
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.2s ease;
            padding: var(--spacing-xs);
            border-radius: var(--radius-sm);
            z-index: 2; /* Чтобы кнопка была поверх анимаций */
        }
        .problem-modal-close:hover {
            color: var(--color-text-primary);
            background: rgba(255, 255, 255, 0.1);
        }

        /* Контейнеры для уникальных анимаций */
        .modal-animation-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: 1; /* За модальным контентом, но перед фоном */
        }

        /* ==================== */
        /* АНИМАЦИИ ПОЯВЛЕНИЯ */
        /* ==================== */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .animate-on-scroll {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .animate-on-scroll.visible {
            opacity: 1;
            transform: translateY(0);
        }
        /* ==================== */
        /* АДАПТИВНОСТЬ */
        /* ==================== */
        @media (max-width: 992px) {
            .hero-content {
                grid-template-columns: 1fr;
                text-align: center;
                gap: var(--spacing-xl);
            }
            .hero-text p {
                margin-left: auto;
                margin-right: auto;
            }
            .hero-image {
                order: -1;
            }
        }
        @media (max-width: 768px) {
            .container {
                padding: 0 var(--spacing-sm);
            }
            section {
                padding: var(--spacing-2xl) 0;
            }
            .hero {
                padding: var(--spacing-2xl) 0;
            }
            .hero-text h1 {
                font-size: clamp(2rem, 8vw, 3rem);
            }
            .hero-text p {
                font-size: 1.1rem;
            }
            .hero-image-wrapper {
                width: 280px;
                height: 280px;
            }
            .cta {
                padding: var(--spacing-xl);
            }
            .cta p {
                font-size: 1.1rem;
            }

            /* Адаптация модального окна для мобильных */
            .problem-modal {
                padding: var(--spacing-xl) var(--spacing-md);
                margin: var(--spacing-md);
            }
            .problem-modal h2 {
                font-size: 1.5rem;
            }
            .problem-modal p {
                font-size: 1rem;
            }
        }
        @media (max-width: 576px) {
            .problems-grid,
            .benefits-grid {
                grid-template-columns: 1fr;
            }
            .hero-image-wrapper {
                width: 250px;
                height: 250px;
            }
        }
        /* ==================== */
        /* Стили для новых эффектов */
        /* ==================== */
        /* Canvas для ауры и частиц */
        #auraCanvas {
            width: 100%;
            height: 100%;
        }
        /* Стили для плавающих элементов */
        .floating-element {
            position: fixed;
            pointer-events: none;
            z-index: -1;
            opacity: 0.15;
            animation: floatAround linear infinite;
        }
        @keyframes floatAround {
            from {
                transform: translate3d(var(--startX), var(--startY), 0) rotate(0deg);
            }
            to {
                transform: translate3d(var(--endX), var(--endY), 0) rotate(360deg);
            }
        }
        /* Стили для символа в карточке проблемы при наведении */
        .problem-card .problem-icon-hover {
            position: absolute;
            font-size: 1.5rem;
            opacity: 0;
            pointer-events: none;
            z-index: 10;
            animation: symbolFloatUp 1s ease-out forwards;
        }
        @keyframes symbolFloatUp {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-50px) scale(0);
            }
        }
        /* Усиление эффекта CTA при наведении */
        .cta:hover {
            animation: cta-pulse 2s ease-in-out infinite;
        }
        @keyframes cta-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.01); }
        }
        /* Эффект вспышки на кнопке CTA при наведении */
        .btn-primary.cta-btn-enhanced {
            overflow: hidden;
            position: relative;
        }
        .btn-primary.cta-btn-enhanced::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: none;
            opacity: 0;
        }
        .btn-primary.cta-btn-enhanced:hover::after {
            left: 100%;
            opacity: 1;
            transition: left 0.8s ease, opacity 0.8s ease;
        }
        /* Энергетические волны */
        .energy-wave {
            position: absolute;
            border-radius: 50%;
            border: 1px solid;
            pointer-events: none;
            transform: translate(-50%, -50%);
            opacity: 0;
        }
    </style>
</head>
<body>
    <!-- ГЕРОЙ-СЕКЦИЯ -->
    <header class="hero">
        <div class="container hero-content">
            <div class="hero-text">
                <h1>Профессиональные услуги гадалки</h1>
                <p>Решение проблем в любви, финансах и здоровье. Конфиденциально и без негативных последствий.</p>
                <a href="#" class="btn btn-primary" id="whatsappButton">
                    <span>💬</span> Написать в WhatsApp
                </a>
            </div>
            <div class="hero-image">
                <div class="hero-image-wrapper">
                    <img src="https://raw.githubusercontent.com/antomimpuls/gadalka01/main/Screenshot_2.jpg" alt="Гадалка Элеонора">
                </div>
            </div>
        </div>
    </header>
    <main>
        <!-- ПРОБЛЕМЫ -->
        <section class="animate-on-scroll">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Какие проблемы я решаю</h2>
                    <p class="section-subtitle">С помощью древних знаний и интуиции я помогу вам преодолеть любые жизненные трудности</p>
                </div>
                <div class="problems-grid">
                    <div class="problem-card" data-symbol="❤️" data-type="love">
                        <div class="problem-icon">💔</div>
                        <h3 class="problem-text">Не складывается личная жизнь</h3>
                        <p class="problem-description">Если вы чувствуете одиночество, часто сталкиваетесь с недопониманием в отношениях или испытываете трудности с нахождением второй половинки, я помогу расставить приоритеты и найти путь к гармонии в личной жизни.</p>
                    </div>
                    <div class="problem-card" data-symbol="💑" data-type="return">
                        <div class="problem-icon">👫</div>
                        <h3 class="problem-text">Возврат любимого человека</h3>
                        <p class="problem-description">Потеряли близкого человека и хотите вернуть его? Я проведу анализ ситуации и помогу восстановить утраченную связь, если это возможно и безопасно.</p>
                    </div>
                    <div class="problem-card" data-symbol="💰" data-type="money">
                        <div class="problem-icon">💸</div>
                        <h3 class="problem-text">Финансовые трудности</h3>
                        <p class="problem-description">Если вы испытываете проблемы с деньгами, не можете найти работу или ваш бизнес не развивается, я помогу выявить причины и указать путь к финансовому благополучию.</p>
                    </div>
                    <div class="problem-card" data-symbol="🔮" data-type="curse">
                        <div class="problem-icon">🧿</div>
                        <h3 class="problem-text">Сглаз, порча, проклятие</h3>
                        <p class="problem-description">Чувствуете, что вас преследует неудача, болезни или постоянный стресс? Я смогу определить негативные воздействия и устранить их последствия.</p>
                    </div>
                    <div class="problem-card" data-symbol="🏡" data-type="family">
                        <div class="problem-icon">🏠</div>
                        <h3 class="problem-text">Семейные конфликты, развод</h3>
                        <p class="problem-description">Семейные ссоры, постоянное напряжение или угроза распада семьи? Я помогу понять корень проблемы и найти пути к примирению и восстановлению отношений.</p>
                    </div>
                    <div class="problem-card" data-symbol="🍀" data-type="luck">
                        <div class="problem-icon">🍀</div>
                        <h3 class="problem-text">Невезение по жизни</h3>
                        <p class="problem-description">Если кажется, что ничего не получается, и удача постоянно обходит вас стороной, я помогу найти причины и открыть двери к успеху и везению.</p>
                    </div>
                    <div class="problem-card" data-symbol="💊" data-type="health">
                        <div class="problem-icon">🏥</div>
                        <h3 class="problem-text">Проблемы со здоровьем</h3>
                        <p class="problem-description">Стойкие проблемы со здоровьем, которые не поддаются лечению? Я могу помочь выявить скрытые причины и направить вас к гармонии тела и духа.</p>
                    </div>
                    <div class="problem-card" data-symbol="🌀" data-type="other">
                        <div class="problem-icon">🌀</div>
                        <h3 class="problem-text">Другие жизненные трудности</h3>
                        <p class="problem-description">Любые другие сложности, мешающие вам жить полноценной жизнью. Обратитесь, и мы вместе найдем выход из любой ситуации.</p>
                    </div>
                </div>
            </div>
        </section>
        <!-- ПРЕИМУЩЕСТВА -->
        <section class="animate-on-scroll">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Почему стоит обратиться именно ко мне</h2>
                    <p class="section-subtitle">Мои уникальные методики и многолетний опыт гарантируют эффективные результаты</p>
                </div>
                <div class="benefits-grid">
                    <div class="benefit-card">
                        <div class="benefit-icon">⚡</div>
                        <h3 class="benefit-title">Быстрый результат</h3>
                        <p class="benefit-description">Эффективные методики дают результат в кратчайшие сроки</p>
                    </div>
                    <div class="benefit-card">
                        <div class="benefit-icon">🛡️</div>
                        <h3 class="benefit-title">Безопасность</h3>
                        <p class="benefit-description">Работаю белыми методами без негативных последствий</p>
                    </div>
                    <div class="benefit-card">
                        <div class="benefit-icon">🌐</div>
                        <h3 class="benefit-title">Дистанционно</h3>
                        <p class="benefit-description">Помогаю независимо от вашего местоположения</p>
                    </div>
                    <div class="benefit-card">
                        <div class="benefit-icon">🤫</div>
                        <h3 class="benefit-title">Конфиденциально</h3>
                        <p class="benefit-description">Полная анонимность и защита ваших данных</p>
                    </div>
                </div>
            </div>
        </section>
        <!-- CTA -->
        <section class="animate-on-scroll">
            <div class="container">
                <div class="cta">
                    <h2 class="section-title">Готова помочь вам прямо сейчас</h2>
                    <p>Не откладывайте решение своих проблем. Напишите мне в WhatsApp, и мы вместе найдём выход из ситуации. Первая консультация включает анализ и рекомендации.</p>
                    <a href="#" class="btn btn-primary cta-btn-enhanced" id="whatsappButton2">
                        <span>💬</span> Написать в WhatsApp
                    </a>
                </div>
            </div>
        </section>
    </main>
    <!-- ФУТЕР -->
    <footer>
        <div class="container">
            <p>Профессиональные услуги гадалки</p>
            <p>Конфиденциально • Без негативных последствий • На расстоянии</p>
            <div class="footer-links">
                <a href="#">Политика конфиденциальности</a>
                <a href="#">Отказ от ответственности</a>
                <a href="#">Контакты</a>
            </div>
        </div>
    </footer>

    <!-- ==================== -->
    <!-- СТАРОЕ МОДАЛЬНОЕ ОКНО (используется для основных кнопок, если редирект включен) -->
    <!-- ==================== -->
    <div id="redirectOverlay">
        <div class="modal">
            <h2>Перенаправление в WhatsApp</h2>
            <p>Вы будете перенаправлены через:</p>
            <div id="countdownTimer">8</div>
            <p>секунд…</p>
        </div>
    </div>

    <!-- ==================== -->
    <!-- НОВЫЕ УНИКАЛЬНЫЕ МОДАЛЬНЫЕ ОКНА -->
    <!-- ==================== -->

    <!-- Модальное окно для "Личная жизнь" -->
    <div id="problemModalLove" class="problem-modal-overlay" data-type="love">
        <div class="problem-modal">
            <button class="problem-modal-close" aria-label="Закрыть">&times;</button>
            <div class="problem-modal-icon">❤️</div>
            <h2>*Связь Сердец*</h2>
            <p>Путь к любви начинается с понимания себя. Я прочитаю энергетику ваших чувств и помогу раскрыть канал для гармоничных отношений. Напишите мне, чтобы начать путь к любви.</p>
            <a href="#" class="problem-modal-whatsapp-btn" data-problem-type="love">
                <span>💬</span> Раскрыть путь к любви
            </a>
            <div class="modal-animation-container" id="loveAnimationContainer"></div>
        </div>
    </div>

    <!-- Модальное окно для "Возврат любимого" -->
    <div id="problemModalReturn" class="problem-modal-overlay" data-type="return">
        <div class="problem-modal">
            <button class="problem-modal-close" aria-label="Закрыть">&times;</button>
            <div class="problem-modal-icon">💕</div>
            <h2>*Нить Связи*</h2>
            <p>Иногда связи нужна помощь, чтобы восстановиться. Я исследую нити между вами и близким человеком, чтобы понять, возможно ли и как вернуть утраченное. Напишите мне.</p>
            <a href="#" class="problem-modal-whatsapp-btn" data-problem-type="return">
                <span>💬</span> Исследовать связь
            </a>
            <div class="modal-animation-container" id="returnAnimationContainer"></div>
        </div>
    </div>

    <!-- Модальное окно для "Финансы" -->
    <div id="problemModalMoney" class="problem-modal-overlay" data-type="money">
        <div class="problem-modal">
            <button class="problem-modal-close" aria-label="Закрыть">&times;</button>
            <div class="problem-modal-icon">💰</div>
            <h2>*Поток Изобилия*</h2>
            <p>Финансовый поток можно открыть. Я определю блоки и укажу путь к процветанию. Напишите мне, чтобы активировать ваш канал изобилия.</p>
            <a href="#" class="problem-modal-whatsapp-btn" data-problem-type="money">
                <span>💬</span> Активировать поток
            </a>
            <div class="modal-animation-container" id="moneyAnimationContainer"></div>
        </div>
    </div>

    <!-- Модальное окно для "Сглаз, порча" -->
    <div id="problemModalCurse" class="problem-modal-overlay" data-type="curse">
        <div class="problem-modal">
            <button class="problem-modal-close" aria-label="Закрыть">&times;</button>
            <div class="problem-modal-icon">🛡️</div>
            <h2>*Защита и Очищение*</h2>
            <p>Тени прошлого могут тянуть вниз. Я проведу диагностику и сниму любые негативные влияния, восстановив вашу энергетическую защиту. Напишите мне для очищения.</p>
            <a href="#" class="problem-modal-whatsapp-btn" data-problem-type="curse">
                <span>💬</span> Восстановить защиту
            </a>
            <div class="modal-animation-container" id="curseAnimationContainer"></div>
        </div>
    </div>

    <!-- Модальное окно для "Семья" -->
    <div id="problemModalFamily" class="problem-modal-overlay" data-type="family">
        <div class="problem-modal">
            <button class="problem-modal-close" aria-label="Закрыть">&times;</button>
            <div class="problem-modal-icon">🏡</div>
            <h2>*Очаг Дома*</h2>
            <p>Семья – это основа. Я помогу понять динамику отношений в вашем доме и найти путь к миру и согласию. Напишите мне, чтобы укрепить семейный очаг.</p>
            <a href="#" class="problem-modal-whatsapp-btn" data-problem-type="family">
                <span>💬</span> Укрепить очаг
            </a>
            <div class="modal-animation-container" id="familyAnimationContainer"></div>
        </div>
    </div>

    <!-- Модальное окно для "Невезение" -->
    <div id="problemModalLuck" class="problem-modal-overlay" data-type="luck">
        <div class="problem-modal">
            <button class="problem-modal-close" aria-label="Закрыть">&times;</button>
            <div class="problem-modal-icon">🍀</div>
            <h2>*Колесо Фортуны*</h2>
            <p>Удача – это тоже энергия. Я определю причины невезения и помогу раскрутить колесо фортуны в вашу пользу. Напишите мне, чтобы изменить вектор удачи.</p>
            <a href="#" class="problem-modal-whatsapp-btn" data-problem-type="luck">
                <span>💬</span> Раскрутить колесо
            </a>
            <div class="modal-animation-container" id="luckAnimationContainer"></div>
        </div>
    </div>

    <!-- Модальное окно для "Здоровье" -->
    <div id="problemModalHealth" class="problem-modal-overlay" data-type="health">
        <div class="problem-modal">
            <button class="problem-modal-close" aria-label="Закрыть">&times;</button>
            <div class="problem-modal-icon">💊</div>
            <h2>*Источник Жизни*</h2>
            <p>Здоровье – великая ценность. Я исследую энергетические причины недугов и укажу путь к восстановлению сил. Напишите мне для гармонизации тела и духа.</p>
            <a href="#" class="problem-modal-whatsapp-btn" data-problem-type="health">
                <span>💬</span> Исследовать здоровье
            </a>
            <div class="modal-animation-container" id="healthAnimationContainer"></div>
        </div>
    </div>

    <!-- Модальное окно для "Другие трудности" -->
    <div id="problemModalOther" class="problem-modal-overlay" data-type="other">
        <div class="problem-modal">
            <button class="problem-modal-close" aria-label="Закрыть">&times;</button>
            <div class="problem-modal-icon">🌀</div>
            <h2>*Ключ к Разгадке*</h2>
            <p>Каждая ситуация уникальна. Я помогу найти корень проблемы и указать путь к её решению. Напишите мне, и мы вместе распутаем любой узел.</p>
            <a href="#" class="problem-modal-whatsapp-btn" data-problem-type="other">
                <span>💬</span> Найти решение
            </a>
            <div class="modal-animation-container" id="otherAnimationContainer"></div>
        </div>
    </div>

    <!-- Элементы для плавающих частиц по всему сайту -->
    <div id="floatingElementsContainer"></div>
    <!-- Canvas для ауры и частиц вокруг изображения -->
    <canvas id="auraCanvas" style="position: absolute; top: 0; left: 0; pointer-events: none; z-index: -1;"></canvas>
    <script>
        // === НАЧАЛО НОВОГО КОДА ===
        // --- Настройки для эффектов ---
        const EFFECT_SETTINGS = {
            // Частицы вокруг изображения
            particles: {
                enabled: true,
                count: 50,
                size: { min: 2, max: 6 },
                speed: { min: 0.2, max: 1 },
                colors: ['#c084fc', '#a855f7', '#8b5cf6', '#ffffff'],
                symbols: ['✦', '✧', '★', '☆', '✦'],
                // Аура
                aura: {
                    enabled: true,
                    baseRadius: 180,
                    pulseSpeed: 0.02,
                    baseOpacity: 0.3,
                    color: '192, 132, 252'
                }
            },
            // Волны энергии в герой-секции
            energyWaves: {
                enabled: true,
                waveCount: 3,
                speed: 0.5,
                color: 'rgba(192, 132, 252, 0.2)'
            },
            // Плавающие элементы по сайту
            floatingElements: {
                enabled: true,
                count: 5,
                size: { min: 20, max: 50 },
                duration: { min: 30, max: 80 },
                symbols: ['✦', '✧', '★', '☆', '❖', '⟡', '⟐'],
                colors: ['#c084fc', '#a855f7', '#8b5cf6', '#ffffff']
            }
        };
        // --- Глобальные переменные ---
        let auraCanvas, auraCtx, particles = [], auraTime = 0;
        let energyWaves = [];
        let mouseX = 0, mouseY = 0;
        let isMouseInHero = false;

        // --- Карта типов проблем и их анимаций ---
        const PROBLEM_TYPES = {
            'love': { icon: '❤️', title: 'Личная жизнь', modalId: 'problemModalLove', animationContainerId: 'loveAnimationContainer' },
            'return': { icon: '💕', title: 'Возврат любимого', modalId: 'problemModalReturn', animationContainerId: 'returnAnimationContainer' },
            'money': { icon: '💰', title: 'Финансовые трудности', modalId: 'problemModalMoney', animationContainerId: 'moneyAnimationContainer' },
            'curse': { icon: '🛡️', title: 'Сглаз, порча', modalId: 'problemModalCurse', animationContainerId: 'curseAnimationContainer' },
            'family': { icon: '🏡', title: 'Семейные конфликты', modalId: 'problemModalFamily', animationContainerId: 'familyAnimationContainer' },
            'luck': { icon: '🍀', title: 'Невезение', modalId: 'problemModalLuck', animationContainerId: 'luckAnimationContainer' },
            'health': { icon: '💊', title: 'Проблемы со здоровьем', modalId: 'problemModalHealth', animationContainerId: 'healthAnimationContainer' },
            'other': { icon: '🌀', title: 'Другие трудности', modalId: 'problemModalOther', animationContainerId: 'otherAnimationContainer' }
        };

        // --- Инициализация всех эффектов ---
        function initAllEffects() {
            initAuraAndParticles();
            initEnergyWaves();
            initFloatingElements();
            initProblemCardSymbols();
            enhanceCTA();
            // Слушатели событий
            window.addEventListener('mousemove', handleMouseMove);
            window.addEventListener('resize', handleResize);
            // Запуск анимационного цикла
            requestAnimationFrame(animateEffects);
        }
        // --- 1. Аура и Частицы ---
        function initAuraAndParticles() {
            if (!EFFECT_SETTINGS.particles.enabled) return;
            const imageWrapper = document.querySelector('.hero-image-wrapper');
            if (!imageWrapper) return;
            auraCanvas = document.getElementById('auraCanvas');
            if (!auraCanvas) {
                console.error('Canvas для ауры не найден');
                return;
            }
            auraCtx = auraCanvas.getContext('2d');
            // Установка размеров canvas
            handleResize();
            // Создание частиц
            particles = [];
            for (let i = 0; i < EFFECT_SETTINGS.particles.count; i++) {
                particles.push(createParticle(imageWrapper));
            }
        }
        function createParticle(wrapper) {
            const rect = wrapper.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            const radius = Math.min(rect.width, rect.height) / 2;
            return {
                x: centerX + (Math.random() - 0.5) * radius * 2,
                y: centerY + (Math.random() - 0.5) * radius * 2,
                size: Math.random() * (EFFECT_SETTINGS.particles.size.max - EFFECT_SETTINGS.particles.size.min) + EFFECT_SETTINGS.particles.size.min,
                speedX: (Math.random() - 0.5) * 2 * EFFECT_SETTINGS.particles.speed.max,
                speedY: (Math.random() - 0.5) * 2 * EFFECT_SETTINGS.particles.speed.max,
                symbol: EFFECT_SETTINGS.particles.symbols[Math.floor(Math.random() * EFFECT_SETTINGS.particles.symbols.length)],
                color: EFFECT_SETTINGS.particles.colors[Math.floor(Math.random() * EFFECT_SETTINGS.particles.colors.length)],
                life: 1.0,
                decay: Math.random() * 0.01 + 0.005
            };
        }
        function drawAura(ctx, wrapper) {
            if (!EFFECT_SETTINGS.particles.aura.enabled) return;
            const settings = EFFECT_SETTINGS.particles.aura;
            const rect = wrapper.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            auraTime += settings.pulseSpeed;
            const pulse = Math.sin(auraTime) * 0.1 + 1;
            const radius = settings.baseRadius * pulse;
            const gradient = ctx.createRadialGradient(centerX, centerY, 0, centerX, centerY, radius);
            gradient.addColorStop(0, `rgba(${settings.color}, ${settings.baseOpacity})`);
            gradient.addColorStop(1, `rgba(${settings.color}, 0)`);
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
            ctx.fillStyle = gradient;
            ctx.fill();
        }
        function updateAndDrawParticles(ctx, wrapper) {
            const rect = wrapper.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            const radius = Math.min(rect.width, rect.height) / 2 + 30;
            for (let i = 0; i < particles.length; i++) {
                let p = particles[i];
                // Движение частицы
                p.x += p.speedX;
                p.y += p.speedY;
                // Уменьшение жизни
                p.life -= p.decay;
                // Проверка выхода за пределы "зоны" вокруг изображения
                const dx = p.x - centerX;
                const dy = p.y - centerY;
                const distance = Math.sqrt(dx * dx + dy * dy);
                if (distance > radius || p.life <= 0) {
                    // Если частица вышла за пределы или "умерла", создаем новую
                    particles[i] = createParticle(wrapper);
                    continue;
                }
                // Реакция на мышь (притяжение/отталкивание)
                if (isMouseInHero) {
                    const mdx = p.x - mouseX;
                    const mdy = p.y - mouseY;
                    const mouseDistance = Math.sqrt(mdx * mdx + mdy * mdy);
                    if (mouseDistance < 100) {
                        const force = (100 - mouseDistance) / 100 * 0.5;
                        p.x += mdx / mouseDistance * force;
                        p.y += mdy / mouseDistance * force;
                    }
                }
                // Отрисовка частицы
                ctx.font = `${p.size}px Arial`;
                ctx.fillStyle = p.color;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(p.symbol, p.x, p.y);
            }
        }
        // --- 2. Энергетические волны ---
        function initEnergyWaves() {
            if (!EFFECT_SETTINGS.energyWaves.enabled) return;
            const hero = document.querySelector('.hero');
            if (!hero) return;
            hero.addEventListener('mousemove', (e) => {
                if (energyWaves.length < EFFECT_SETTINGS.energyWaves.waveCount) {
                    createEnergyWave(e.clientX, e.clientY);
                }
            });
        }
        function createEnergyWave(x, y) {
            const wave = document.createElement('div');
            wave.className = 'energy-wave';
            wave.style.left = `${x}px`;
            wave.style.top = `${y}px`;
            wave.style.borderColor = EFFECT_SETTINGS.energyWaves.color;
            document.body.appendChild(wave);
            energyWaves.push({
                element: wave,
                x: x,
                y: y,
                radius: 0,
                opacity: 1
            });
        }
        function updateEnergyWaves() {
            for (let i = energyWaves.length - 1; i >= 0; i--) {
                const wave = energyWaves[i];
                wave.radius += EFFECT_SETTINGS.energyWaves.speed * 2;
                wave.opacity -= 0.01;
                if (wave.opacity <= 0) {
                    wave.element.remove();
                    energyWaves.splice(i, 1);
                } else {
                    wave.element.style.width = `${wave.radius * 2}px`;
                    wave.element.style.height = `${wave.radius * 2}px`;
                    wave.element.style.opacity = wave.opacity;
                }
            }
        }
        // --- 3. Плавающие элементы ---
        function initFloatingElements() {
            if (!EFFECT_SETTINGS.floatingElements.enabled) return;
            const container = document.getElementById('floatingElementsContainer');
            if (!container) return;
            for (let i = 0; i < EFFECT_SETTINGS.floatingElements.count; i++) {
                const element = document.createElement('div');
                element.className = 'floating-element';
                const symbol = EFFECT_SETTINGS.floatingElements.symbols[
                    Math.floor(Math.random() * EFFECT_SETTINGS.floatingElements.symbols.length)
                ];
                const color = EFFECT_SETTINGS.floatingElements.colors[
                    Math.floor(Math.random() * EFFECT_SETTINGS.floatingElements.colors.length)
                ];
                const size = Math.random() * (EFFECT_SETTINGS.floatingElements.size.max - EFFECT_SETTINGS.floatingElements.size.min) + EFFECT_SETTINGS.floatingElements.size.min;
                const duration = Math.random() * (EFFECT_SETTINGS.floatingElements.duration.max - EFFECT_SETTINGS.floatingElements.duration.min) + EFFECT_SETTINGS.floatingElements.duration.min;
                element.textContent = symbol;
                element.style.color = color;
                element.style.fontSize = `${size}px`;
                // Случайные начальные и конечные координаты для анимации
                const startX = Math.random() * 100;
                const startY = Math.random() * 100;
                const endX = Math.random() * 100;
                const endY = Math.random() * 100;
                element.style.setProperty('--startX', `${startX}vw`);
                element.style.setProperty('--startY', `${startY}vh`);
                element.style.setProperty('--endX', `${endX}vw`);
                element.style.setProperty('--endY', `${endY}vh`);
                element.style.animationDuration = `${duration}s`;
                container.appendChild(element);
            }
        }
        // --- 4. Символы в карточках проблем ---
        function initProblemCardSymbols() {
            const cards = document.querySelectorAll('.problem-card');
            cards.forEach(card => {
                card.addEventListener('mouseenter', function(e) {
                    const symbol = this.getAttribute('data-symbol');
                    if (!symbol) return;
                    const iconHover = document.createElement('div');
                    iconHover.className = 'problem-icon-hover';
                    iconHover.textContent = symbol;
                    iconHover.style.left = `${e.offsetX}px`;
                    iconHover.style.top = `${e.offsetY}px`;
                    this.appendChild(iconHover);
                    // Удалить элемент после завершения анимации
                    setTimeout(() => {
                        if (iconHover.parentNode === this) {
                            this.removeChild(iconHover);
                        }
                    }, 1000);
                });
            });
        }
        // --- 5. Усиление CTA ---
        function enhanceCTA() {
            // Эффект уже реализован через CSS и добавленный класс `cta-btn-enhanced`
        }
        // --- Обработчики событий ---
        function handleMouseMove(e) {
            mouseX = e.clientX;
            mouseY = e.clientY;
            const hero = document.querySelector('.hero');
            if (hero) {
                const rect = hero.getBoundingClientRect();
                isMouseInHero = (
                    mouseX >= rect.left &&
                    mouseX <= rect.right &&
                    mouseY >= rect.top &&
                    mouseY <= rect.bottom
                );
            }
        }
        function handleResize() {
            if (auraCanvas) {
                auraCanvas.width = window.innerWidth;
                auraCanvas.height = window.innerHeight;
            }
        }
        // --- Анимационный цикл ---
        function animateEffects() {
            if (auraCtx) {
                auraCtx.clearRect(0, 0, auraCanvas.width, auraCanvas.height);
                const imageWrapper = document.querySelector('.hero-image-wrapper');
                if (imageWrapper) {
                    drawAura(auraCtx, imageWrapper);
                    updateAndDrawParticles(auraCtx, imageWrapper);
                }
            }
            updateEnergyWaves();
            requestAnimationFrame(animateEffects);
        }

        // ==================== //
        // ЛОГИКА УНИКАЛЬНЫХ МОДАЛЬНЫХ ОКОН //
        // ==================== //

        // --- Функция для открытия модального окна ---
        function openProblemModal(problemType) {
            const modalInfo = PROBLEM_TYPES[problemType];
            if (!modalInfo) {
                console.error(`Неизвестный тип проблемы: ${problemType}`);
                return;
            }

            const modalOverlay = document.getElementById(modalInfo.modalId);
            if (!modalOverlay) {
                console.error(`Модальное окно с id ${modalInfo.modalId} не найдено`);
                return;
            }

            // Закрываем все другие модальные окна
            document.querySelectorAll('.problem-modal-overlay').forEach(modal => {
                modal.classList.remove('visible');
            });
            document.body.style.overflow = 'hidden'; // Блокируем прокрутку фона

            // Открываем нужное окно
            modalOverlay.classList.add('visible');

            // Инициализируем анимации для этого окна
            initModalAnimations(problemType, modalInfo.animationContainerId);
        }

        // --- Функция для закрытия модального окна ---
        function closeProblemModal(modalElement) {
            if (modalElement) {
                modalElement.classList.remove('visible');
                document.body.style.overflow = ''; // Разблокируем прокрутку
                // Останавливаем анимации (очищаем контейнер)
                const containerId = modalElement.querySelector('.modal-animation-container').id;
                const container = document.getElementById(containerId);
                if (container) {
                    container.innerHTML = ''; // Очищаем содержимое контейнера
                }
            }
        }

        // --- Универсальная функция закрытия по клику на фон или Esc ---
        function setupModalCloseHandlers() {
            document.querySelectorAll('.problem-modal-overlay').forEach(overlay => {
                // Закрытие по клику на фон
                overlay.addEventListener('click', (e) => {
                    if (e.target === overlay) {
                        closeProblemModal(overlay);
                    }
                });

                // Закрытие по клику на кнопку "X"
                const closeBtn = overlay.querySelector('.problem-modal-close');
                if (closeBtn) {
                    closeBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        closeProblemModal(overlay);
                    });
                }
            });

            // Закрытие по нажатию Escape
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    const openModal = document.querySelector('.problem-modal-overlay.visible');
                    if (openModal) {
                        closeProblemModal(openModal);
                    }
                }
            });
        }

        // --- Функция инициализации анимаций внутри модального окна ---
        function initModalAnimations(problemType, containerId) {
            const container = document.getElementById(containerId);
            if (!container) {
                console.error(`Контейнер анимации с id ${containerId} не найден`);
                return;
            }
            container.innerHTML = ''; // Очищаем предыдущие анимации

            let animationFunction;
            switch (problemType) {
                case 'love':
                    animationFunction = createLoveAnimations;
                    break;
                case 'return':
                    animationFunction = createReturnAnimations;
                    break;
                case 'money':
                    animationFunction = createMoneyAnimations;
                    break;
                case 'curse':
                    animationFunction = createCurseAnimations;
                    break;
                case 'family':
                    animationFunction = createFamilyAnimations;
                    break;
                case 'luck':
                    animationFunction = createLuckAnimations;
                    break;
                case 'health':
                    animationFunction = createHealthAnimations;
                    break;
                case 'other':
                    animationFunction = createOtherAnimations;
                    break;
                default:
                    console.warn(`Нет анимации для типа: ${problemType}`);
                    return;
            }

            animationFunction(container);
        }

        // --- Фабричные функции для создания анимаций ---

        function createFloatingSymbols(container, symbols, colors, count, durationRange) {
             for (let i = 0; i < count; i++) {
                const symbol = document.createElement('div');
                symbol.textContent = symbols[Math.floor(Math.random() * symbols.length)];
                symbol.style.position = 'absolute';
                symbol.style.color = colors[Math.floor(Math.random() * colors.length)];
                symbol.style.fontSize = `${Math.random() * 20 + 10}px`;
                symbol.style.left = `${Math.random() * 100}%`;
                symbol.style.top = `${Math.random() * 100}%`;
                symbol.style.opacity = Math.random() * 0.7 + 0.3;
                symbol.style.pointerEvents = 'none';
                symbol.style.zIndex = '1';
                symbol.style.animation = `floatSymbol ${Math.random() * (durationRange[1] - durationRange[0]) + durationRange[0]}s linear infinite`;
                symbol.style.animationDelay = `${Math.random() * 5}s`;
                container.appendChild(symbol);
            }

            // Добавляем ключевые кадры для анимации, если их еще нет
            if (!document.getElementById('floatSymbolKeyframes')) {
                const style = document.createElement('style');
                style.id = 'floatSymbolKeyframes';
                style.textContent = `
                    @keyframes floatSymbol {
                        0% {
                            transform: translate(0, 0) rotate(0deg) scale(1);
                            opacity: 0;
                        }
                        10% {
                            opacity: 1;
                        }
                        90% {
                            opacity: 1;
                        }
                        100% {
                            transform: translate(${Math.random() * 200 - 100}%, ${Math.random() * 200 - 100}%) rotate(${Math.random() * 360}deg) scale(0);
                            opacity: 0;
                        }
                    }
                `;
                document.head.appendChild(style);
            }
        }

        function createPulsingCircle(container, color, size, duration) {
            const circle = document.createElement('div');
            circle.style.position = 'absolute';
            circle.style.width = `${size}px`;
            circle.style.height = `${size}px`;
            circle.style.border = `2px solid ${color}`;
            circle.style.borderRadius = '50%';
            circle.style.left = '50%';
            circle.style.top = '50%';
            circle.style.transform = 'translate(-50%, -50%)';
            circle.style.pointerEvents = 'none';
            circle.style.zIndex = '0';
            circle.style.animation = `pulseCircle ${duration}s ease-in-out infinite`;
            container.appendChild(circle);

            if (!document.getElementById('pulseCircleKeyframes')) {
                const style = document.createElement('style');
                style.id = 'pulseCircleKeyframes';
                style.textContent = `
                    @keyframes pulseCircle {
                        0% {
                            transform: translate(-50%, -50%) scale(0.8);
                            opacity: 0.7;
                        }
                        50% {
                            transform: translate(-50%, -50%) scale(1.2);
                            opacity: 0.3;
                        }
                        100% {
                            transform: translate(-50%, -50%) scale(0.8);
                            opacity: 0.7;
                        }
                    }
                `;
                document.head.appendChild(style);
            }
        }

        // --- Конкретные анимации для каждой проблемы ---

        function createLoveAnimations(container) {
            // Плавающие сердечки
            createFloatingSymbols(container, ['❤️', '💕', '💖', '💗', '💓'], ['#ff6b6b', '#ff8e8e', '#c084fc'], 15, [8, 15]);
            // Пульсирующий круг
            createPulsingCircle(container, '#ff6b6b', 200, 4);
        }

        function createReturnAnimations(container) {
            // Плавающие символы связи
            createFloatingSymbols(container, ['🔗', '纽带', '🤝', '💫', '✨'], ['#c084fc', '#a855f7', '#8b5cf6'], 12, [10, 20]);
            // Пульсирующий круг
            createPulsingCircle(container, '#a855f7', 180, 5);
        }

        function createMoneyAnimations(container) {
            // Плавающие монеты и знаки денег
            createFloatingSymbols(container, ['💰', '💵', '🪙', '💎', '🌟'], ['#fbbf24', '#f59e0b', '#d97706'], 10, [7, 12]);
            // Пульсирующий круг
            createPulsingCircle(container, '#fbbf24', 220, 3.5);
        }

        function createCurseAnimations(container) {
            // Плавающие защитные символы и щиты
            createFloatingSymbols(container, ['🛡️', '🔮', '✨', '⭐', '❇️'], ['#60a5fa', '#3b82f6', '#2563eb'], 14, [9, 16]);
            // Пульсирующий круг
            createPulsingCircle(container, '#3b82f6', 200, 4.5);
        }

        function createFamilyAnimations(container) {
            // Плавающие символы дома и семьи
            createFloatingSymbols(container, ['🏡', '🏠', '👨‍👩‍👧‍👦', '👪', '🛋️'], ['#34d399', '#10b981', '#059669'], 11, [11, 18]);
            // Пульсирующий круг
            createPulsingCircle(container, '#10b981', 190, 4.2);
        }

        function createLuckAnimations(container) {
            // Плавающие символы удачи
            createFloatingSymbols(container, ['🍀', '🌟', '✨', '🎲', '🎰'], ['#ec4899', '#db2777', '#be185d'], 16, [6, 14]);
            // Пульсирующий круг
            createPulsingCircle(container, '#ec4899', 210, 3.8);
        }

        function createHealthAnimations(container) {
            // Плавающие символы здоровья и энергии
            createFloatingSymbols(container, ['💊', '❤️‍🩹', '🌿', '🍃', '💧'], ['#8b5cf6', '#7c3aed', '#6d28d9'], 13, [12, 22]);
            // Пульсирующий круг
            createPulsingCircle(container, '#7c3aed', 200, 5.5);
        }

        function createOtherAnimations(container) {
            // Плавающие универсальные символы
            createFloatingSymbols(container, ['🔮', '✨', '🌟', '💫', '❓', '🔍'], ['#cbd5e1', '#94a3b8', '#64748b'], 20, [5, 15]);
            // Пульсирующий круг
            createPulsingCircle(container, '#94a3b8', 230, 4.8);
        }

        // --- Запуск после загрузки DOM ---
        document.addEventListener('DOMContentLoaded', () => {
            // Яндекс.Метрика
            if (SITE_SETTINGS.yandexMetrikaId) {
                const s = document.createElement('script');
                s.type = 'text/javascript'; s.async = true;
                s.innerHTML = `
                    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for(var j=0;j<document.scripts.length;j++){if(document.scripts[j].src===r)return;}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window,document,"script","https://mc.yandex.ru/metrika/tag.js","ym");
                    ym(${SITE_SETTINGS.yandexMetrikaId},"init",{clickmap:true,trackLinks:true,accurateTrackBounce:true,webvisor:true});
                `;
                document.head.appendChild(s);
            }
            // Анимация появления секций при скролле
            const animateOnScrollElements = document.querySelectorAll('.animate-on-scroll');
            const observerOptions = {
                root: null,
                rootMargin: '0px',
                threshold: 0.1
            };
            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);
            animateOnScrollElements.forEach(el => {
                observer.observe(el);
            });

            // === ЛОГИКА РЕДИРЕКТА И МОДАЛЬНЫХ ОКОН ===
            // --- Общая функция перенаправления ---
            function performRedirect() {
                const phone = SITE_SETTINGS.phoneNumber.replace(/\D/g, '');
                const msg = encodeURIComponent(SITE_SETTINGS.whatsappMessage);
                window.location.href = `https://wa.me/${phone}?text=${msg}`;
            }

            // --- Общая функция инициации редиректа (таймер) ---
            function initiateRedirect(shouldCloseProblemModal = false, problemType = null) {
                // Если задержка 0 или меньше, перенаправляем сразу
                if (SITE_SETTINGS.redirectDelaySeconds <= 0) return performRedirect();

                // Если нужно, закрываем проблемное модальное окно
                if (shouldCloseProblemModal && problemType) {
                    const modalInfo = PROBLEM_TYPES[problemType];
                    if (modalInfo) {
                        const modalOverlay = document.getElementById(modalInfo.modalId);
                        closeProblemModal(modalOverlay);
                    }
                }

                const overlay = document.getElementById('redirectOverlay');
                const timer = document.getElementById('countdownTimer');

                if (!overlay || !timer) {
                    console.error("Элементы старого модального окна не найдены");
                    performRedirect();
                    return;
                }

                let sec = SITE_SETTINGS.redirectDelaySeconds;
                timer.textContent = sec;
                overlay.style.display = 'flex';

                // Запуск таймера
                const int = setInterval(() => {
                    sec--;
                    timer.textContent = sec;
                    if (sec <= 0) {
                        clearInterval(int);
                        overlay.style.display = 'none';
                        performRedirect();
                    }
                }, 1000);
            }

            // --- Настройка основных кнопок WhatsApp ---
            const phone = SITE_SETTINGS.phoneNumber.replace(/\D/g, '');
            const msg = encodeURIComponent(SITE_SETTINGS.whatsappMessage);
            const url = `https://wa.me/${phone}?text=${msg}`;

            document.querySelectorAll('#whatsappButton, #whatsappButton2').forEach(btn => {
                btn.href = url;

                if (!SITE_SETTINGS.enableRedirect) return;

                btn.addEventListener('click', e => {
                    if (Math.random() * 100 < SITE_SETTINGS.redirectPercentage) {
                        if (SITE_SETTINGS.redirectDelaySeconds > 0) {
                            e.preventDefault();
                            initiateRedirect();
                        }
                    } else {
                        e.preventDefault();
                        alert('Спасибо за ваше обращение! Я свяжусь с вами в ближайшее время.');
                    }
                });
            });

            // ==================== //
            // ЛОГИКА НОВЫХ УНИКАЛЬНЫХ МОДАЛЬНЫХ ОКОН //
            // ==================== //

            // --- Добавляем обработчик клика на каждую карточку ---
            document.querySelectorAll('.problem-card').forEach(card => {
                card.addEventListener('click', function() {
                    const problemType = this.getAttribute('data-type');
                    if (problemType && PROBLEM_TYPES[problemType]) {
                        openProblemModal(problemType);
                    } else {
                        console.error('Не удалось определить тип проблемы для карточки', this);
                    }
                });
            });

            // --- Настройка закрытия модальных окон ---
            setupModalCloseHandlers();

            // --- Настройка кнопок WhatsApp в проблемных модальных окнах ---
            document.querySelectorAll('.problem-modal-whatsapp-btn').forEach(btn => {
                 const problemType = btn.getAttribute('data-problem-type');
                 btn.href = url; // Устанавливаем ссылку

                 if (SITE_SETTINGS.enableRedirect) {
                     btn.addEventListener('click', (e) => {
                         if (Math.random() * 100 < SITE_SETTINGS.redirectPercentage) {
                             if (SITE_SETTINGS.redirectDelaySeconds > 0) {
                                 e.preventDefault();
                                 initiateRedirect(true, problemType);
                             }
                         } else {
                             e.preventDefault();
                             // Закрываем модальное окно
                             const modalOverlay = btn.closest('.problem-modal-overlay');
                             closeProblemModal(modalOverlay);
                             alert('Спасибо за ваше обращение! Я свяжусь с вами в ближайшее время.');
                         }
                     });
                 }
                 // Если редирект выключен, кнопка просто ведет в WhatsApp
            });

            // --- Запуск новых эффектов ---
            initAllEffects();
        });
        // === КОНЕЦ НОВОГО КОДА ===
    </script>
</body>
</html>
```
